<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>欢迎页面-X-admin2.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="/static/css/font.css">
    <link rel="stylesheet" href="/static/css/xadmin.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="/static/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/static/js/xadmin.js"></script>
</head>
<body>
<div class="x-body layui-anim layui-anim-up">
    <fieldset class="layui-elem-field">
        <legend>角色修改</legend>
        <div class="layui-field-box">
            <form class="layui-form" onsubmit="return modifyRole()" id="form1">
                <input th:value="${newRole.r_Code}" th:name="r_Code" hidden/>
                <table class="layui-table">
                    <tbody>
                    <tr>
                        <th>角色编码</th>
                        <td th:text="${newRole.r_Code}"></td>
                    </tr>
                    <tr>
                        <th>角色名称</th>
                        <td th:text="${newRole.r_Name}"></td>
                    </tr>
                    <tr>
                        <td>所属部门</td>
                        <td>
                            <select name="r_DeptNo.d_Id" class="layui-select" style="width: 200px;height: 30px">
                                <option value="0">--请选择--</option>
                                <option th:selected="${newRole.r_DeptNo.d_Id eq dept.d_Id}" th:each="dept:${depts}"
                                        th:value="${dept.d_Id}" th:text="${dept.d_Name}"></option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>备注信息</td>
                        <td>
                            <textarea name="r_Description" class="layui-textarea" th:text="${newRole.r_Description}"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: center">
                            <input type="submit" value="提交" class="layui-btn layui-bg-blue"/>
                            <input type="button" value="返回" class="layui-btn layui-bg-blue" onclick="back()"/>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </fieldset>
</div>
<!-- jQuery -->
<script src="/static/lib/jquery/dist/jquery.min.js"></script>
<script th:inline="javascript">

    function back() {
        parent.layer.closeAll();
    }

    function modifyRole() {
        $.ajax({
            //几个参数需要注意一下
            type: "POST",//提交类型
            dataType: "json",//预期服务器返回的数据类型
            url: "/modifyRole" ,//url
            data: $("#form1").serialize(),//序列化表单信息
            success: function (data) {
                console.log(data);//打印服务端返回的数据(调试用)
                if (data == true) {
                    layer.msg("修改成功!");
                    parent.$("#roleInfo").DataTable().ajax.reload();
                }else{
                    layer.msg("修改失败!");
                }
            }
        });
        return false;
    }

    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?b393d153aeb26b46e9431fabaf0f6190";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();

</script>
</body>
</html>