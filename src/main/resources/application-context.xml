<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd"
       default-autowire="byName">
    <!--default-autowire 配置默认自动注入-->

    <!--加载数据库配置文件 database.properties-->
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="classpath:database.properties"/>
    </bean>

    <!--数据源配置-->
    <bean class="com.alibaba.druid.pool.DruidDataSource" name="dataSource">
        <property name="url" value="${db_url}"/>
        <property name="driverClassName" value="${db_driver}"/>
        <property name="username" value="${db_username}"/>
        <property name="password" value="${db_password}"/>
        <!--配置最大连接池数量-->
        <!--<property name="maxActive" value="20"/>-->
        <!--配置获取连接等待超时的时间 单位/毫秒-->
        <!--<property name="maxWait" value="60000"/>-->
    </bean>

    <!--配置会话工厂-->
    <bean class="org.mybatis.spring.SqlSessionFactoryBean" name="sessionFactory">
        <!--已配置 default-autowire="byName" 通过名字自动匹配 可以忽略-->
        <property name="dataSource" ref="dataSource"/>
        <!--指定类型别名包 XXXMapper.xml 使用-->
        <property name="typeAliasesPackage" value="com.pojo"/>
        <!--配置映射器位置-->
        <property name="mapperLocations" value="classpath:mybatis/mapping/*.xml"/>
        <!--指定外部配置文件位置 (控制台显示SQL语句)-->
        <property name="configLocation" value="classpath:mybatis/mybatis-config.xml"/>
    </bean>

    <!--Mapper扫描器配置-->
    <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <!--扫描所有的dao接口-->
        <property name="basePackage" value="com.dao"/>
        <!--会话工厂Bean名 默认找键值 sqlSessionFactory 的map -->
        <!--所以不用 ref 用value 且会话工厂名字定义为 sessionFactory 因此要多此配置-->
        <!--会话工厂配置 name 为 sqlSessionFactory 则不需要配置 sqlSessionFactoryBeanName-->
        <property name="sqlSessionFactoryBeanName" value="sessionFactory"/>
    </bean>

</beans>